var TicTacToe={};TicTacToe.FBWrapper=function(){return{accessToken:null,namespace:"tictactoeextended",checkLoginStatus:function(a){console.log("checkLoginStatus");a&&"connected"==a.status?(TicTacToe.FBWrapper.accessToken=a.authResponse.accessToken,FB.api("/me",function(a){console.log(a);TicTacToe.GameState.p1Name=a.name;$("#p1NameDiv1").val(a.name)}),!0==TicTacToe.GameState.makeFBPost&&TicTacToe.FBWrapper.postAction()):TicTacToe.FBWrapper.accessToken=null},postAction:function(){console.log("postaction");null!=TicTacToe.FBWrapper.accessToken&&
FB.api("/me/"+TicTacToe.FBWrapper.namespace+":earn","post",{report:TicTacToe.GameState.gameDescription,badge:"http://www.gethugames.in/tictactoe/badge.php?rank="+(10-TicTacToe.GameState.rank)},function(a){console.log(a)})},shareStatus:function(){}}}();TicTacToe.TwitterWrapper=function(){return{shareStatus:function(){window.open("http://twitter.com/home?status="+TicTacToe.GameState.gameDescription+" goo.gl/sfb8L","title","height=300, width=480")}}}();TicTacToe.AudioManager=function(){var a,f;return{init:function(){a=new Audio("audio/bgm.ogg");a.volume=0.3;a.loop=!0;a.play()},click:function(){var a;a=new Audio("audio/clickEffect.ogg");a.volume=0.3;a.play()},chime:function(){(new Audio("audio/chimeEffect.ogg")).play()},mute:function(){f=!0;a.pause()},unMute:function(){f=!1;a.play()},toggleMute:function(){(f=!f)?a.pause():a.play()}}}();TicTacToe.InputManager=function(){var a,f,c=!1;$(document).mousemove(function(b){a=b.pageX;f=b.pageY});$(document).mousedown(function(b){a=b.pageX;f=b.pageY;c=!0});document.addEventListener("touchend",function(b){b.preventDefault();b=b.touches[0];a=b.pageX;f=b.pageY;c=!0},!1);return{getMouse:function(){return{x:a,y:f}},getClickIfAny:function(){return c?(c=!1,{x:a,y:a}):null},init:function(){$("#scoreBoardDiv").hide();$("#playOptionsDiv").hide();$("#tipsScreen").hide();$("#inGameMute").click(function(){TicTacToe.AudioManager.toggleMute();
"\u2551"==$("#inGameMute").html()?$("#inGameMute").html("&#9668;"):$("#inGameMute").html("&#9553;")});$("#menuButton").click(function(){TicTacToe.GameState.currentScreen="Menu";$("#menuScreen").show();$(".freeBoardDiv").show();$("#scoreBoardDiv").hide();$("#playOptionsDiv").hide();$("#shareScoreWidget").hide()});$("#infoScreen").click(function(){TicTacToe.GameState.currentScreen="Menu";$("#infoScreen").hide();$("#menuScreen").show()});$("#helpButton").click(function(){TicTacToe.GameState.currentScreen=
"Info";$("#infoScreen").show();$("#menuScreen").hide()});$("#creditsScreen").click(function(){TicTacToe.GameState.currentScreen="Menu";$("#creditsScreen").hide();$("#menuScreen").show()});$("#creditsButton").click(function(){TicTacToe.GameState.currentScreen="Credits";$("#creditsScreen").show();$("#menuScreen").hide()});$("#closeGameOver").click(function(){TicTacToe.GameState.currentScreen="Menu";$("#shareScoreWidget").hide();$("#menuScreen").show();$(".freeBoardDiv").show();$("#scoreBoardDiv").hide();
$("#playOptionsDiv").hide()});$("#muteMusicButton").click(function(){TicTacToe.AudioManager.toggleMute()});$("#shareFacebookWidget").click(function(a){TicTacToe.GameState.makeFBPost=!0;console.log("logging in");FB.login(function(a){a.authResponse&&(console.log("logged in"),FB.getLoginStatus(TicTacToe.FBWrapper.checkLoginStatus))},{scope:"user_about_me,publish_stream,publish_actions"});a.stopPropogation()});$("#shareTwitterWidget").click(function(a){TicTacToe.TwitterWrapper.shareStatus();a.stopPropogation()});
$("#p1NameDiv1").blur(function(){TicTacToe.GameState.p1Name=$("#p1NameDiv1").val()});$("#p2NameDiv1").blur(function(){TicTacToe.GameState.p2Name=$("#p2NameDiv1").val()});$("#p1NameDiv1").click(function(a){a.stopPropagation()});$("#p2NameDiv1").click(function(a){a.stopPropagation()});navigator.onLine||$("#creditsDiv").html("<br/><b>OFFLINE MODE</b><br/><br/>Sharing option not available<br/><br/>")}}}();TicTacToe.GameState=function(){return{currentScreen:"Menu",isAI:0,tiles:[],highlightTiles:[],currentPlayerID:0,player1Score:0,player2Score:0,hoverTileX:0,hoverTileY:0,selectedTileX:0,selectedTileY:0,rows:9,cols:9,block:4,isGameOver:!1,lastUpdatedTime:new Date,p1ElapsedTime:0,p2ElapsedTime:0,aiTileX:0,aiTileY:0,isValidMove:!1,p1Name:"Player 1",p2Name:"Player 2",gameStatus:"",gameDescription:"",badgeURL:"",rank:0,makeFBPost:!1,reset:function(){var a;a=TicTacToe.GameState;a.currentScreen="Menu";a.isAI=
!0;a.currentPlayerID=0;a.player1Score=0;a.player2Score=0;a.selectedTileX=0;a.selectedTileY=0;a.lastUpdatedTime=new Date;a.p1ElapsedTime=0;for(var f=a.p2ElapsedTime=0;f<a.rows;f++){a.tiles[f]=[];TicTacToe.GameLogic.scoreTile[f]=[];for(var c=0;c<a.cols;c++)a.tiles[f][c]=-1,TicTacToe.GameLogic.scoreTile[f][c]=0}$("#shareScoreWidget").hide();$("#infoScreen").hide();$("#creditsScreen").hide();$("#timeTaken.text").text("");$("#player1Score").text("0");$("#player2Score").text("0")}}}();TicTacToe.GameLogic=function(){return{scoreTile:[],updateScore:function(a){for(var f=0,c=0,b,d,h=a.highlightTiles.length,e=0;e<a.rows;e++)for(var j=0;j<a.cols;j++){var i;if(-1!=a.tiles[e][j]){i=0;b=[];d=!1;for(var g=j;g<j+a.block&&g<a.cols;g++){a.selectedTileX==e&&a.selectedTileY==g&&(d=!0);var m={x:e,y:g};b.push(m);if(0==a.tiles[e][g])i++;else if(1==a.tiles[e][g])i--;else break}if(i==a.block&&(f++,d))for(g=0;g<a.block;g++)a.highlightTiles[h++]=b[g];if(i==-a.block&&(c++,d))for(g=0;g<a.block;g++)a.highlightTiles[h++]=
b[g];i=0;b=[];d=!1;for(g=e;g<e+a.block&&g<a.rows;g++)if(a.selectedTileX==g&&a.selectedTileY==j&&(d=!0),m={x:g,y:j},b.push(m),0==a.tiles[g][j])i++;else if(1==a.tiles[g][j])i--;else break;if(i==a.block&&(f++,d))for(g=0;g<a.block;g++)a.highlightTiles[h++]=b[g];if(i==-a.block&&(c++,d))for(g=0;g<a.block;g++)a.highlightTiles[h++]=b[g];i=0;b=[];d=!1;for(g=0;g<a.block;g++){a.selectedTileX==g+e&&a.selectedTileY==g+j&&(d=!0);m={x:g+e,y:g+j};b.push(m);if(g+j>=a.cols||g+e>=a.rows)break;if(0==a.tiles[g+e][g+j])i++;
else if(1==a.tiles[g+e][g+j])i--;else break}if(i==a.block&&(f++,d))for(g=0;g<a.block;g++)a.highlightTiles[h++]=b[g];if(i==-a.block&&(c++,d))for(g=0;g<a.block;g++)a.highlightTiles[h++]=b[g];i=0;b=[];d=!1;for(g=0;g<a.block;g++){a.selectedTileX==e-g&&a.selectedTileY==g+j&&(d=!0);m={x:e-g,y:g+j};b.push(m);if(j+g>=a.cols||0>e-g)break;if(0==a.tiles[e-g][j+g])i++;else if(1==a.tiles[e-g][j+g])i--;else break}if(i==a.block&&(f++,d))for(g=0;g<a.block;g++)a.highlightTiles[h++]=b[g];if(i==-a.block&&(c++,d))for(g=
0;g<a.block;g++)a.highlightTiles[h++]=b[g]}}a.player1Score=f;a.player2Score=c},endTurn:function(a){var f;a.currentPlayerID=0==a.currentPlayerID?1:0;f=!0;for(var c=0;c<a.rows;c++)for(var b=0;b<a.cols;b++)-1==a.tiles[c][b]&&(f=!1);a.isGameOver=f},calcTime:function(a){var f,c,b;f=new Date;c=f-a.lastUpdatedTime;a.lastUpdatedTime=f;0==a.currentPlayerID?a.p1ElapsedTime+=c:a.p2ElapsedTime+=c;f=a.p1ElapsedTime/1E3;c=Math.floor(f/60);f=Math.floor(f%60);a=a.p2ElapsedTime/1E3;b=Math.floor(a/60);a=Math.floor(a%
60);$("#timeTaken").text(c+":"+f+"  /  "+b+":"+a)},updateUI:function(a){$("#player1Score").text(a.player1Score);$("#player2Score").text(a.player2Score)},aiMove:function(a){for(var f=TicTacToe.GameLogic,c=0;c<a.rows;c++){f.scoreTile[c]=[];for(var b=0;b<a.cols;b++)f.scoreTile[c][b]=0}console.log("left to right");for(c=0;c<a.rows;c++)for(var d=0,h=-1,b=0;b<a.cols;b++)-1==a.tiles[c][b]?(f.scoreTile[c][b]+=d,d=0):a.tiles[c][b]==h?d++:a.tiles[c][b]!=h&&(d=1),h=a.tiles[c][b];console.log("right to left");
for(c=0;c<a.rows;c++){d=0;h=-1;for(b=a.cols-1;0<=b;b--)-1==a.tiles[c][b]?(f.scoreTile[c][b]+=d,d=0):a.tiles[c][b]==h?d++:a.tiles[c][b]!=h&&(d=1),h=a.tiles[c][b]}console.log("top to bottom");for(b=0;b<a.cols;b++){d=0;h=-1;for(c=0;c<a.rows;c++)-1==a.tiles[c][b]?(f.scoreTile[c][b]+=d,d=0):a.tiles[c][b]==h?d++:a.tiles[c][b]!=h&&(d=1),h=a.tiles[c][b]}for(b=0;b<a.cols;b++){d=0;h=-1;for(c=a.rows-1;0<=c;c--)-1==a.tiles[c][b]?(f.scoreTile[c][b]+=d,d=0):a.tiles[c][b]==h?d++:a.tiles[c][b]!=h&&(d=1),h=a.tiles[c][b]}for(c=
0;c<a.rows;c++)for(var e=c,d=0,h=-1,b=0;b<a.cols&&e<a.rows;b++)-1==a.tiles[e][b]?(f.scoreTile[e][b]+=d,d=0):a.tiles[e][b]==h?d++:a.tiles[e][b]!=h&&(d=1),h=a.tiles[e][b],e++;for(b=1;b<a.cols;b++){e=b;d=0;h=-1;for(c=0;c<a.rows&&e<a.cols;c++)-1==a.tiles[c][e]?(f.scoreTile[c][e]+=d,d=0):a.tiles[c][e]==h?d++:a.tiles[c][e]!=h&&(d=1),h=a.tiles[c][e],e++}for(c=a.rows-1;0<=c;c--){e=c;d=0;h=-1;for(b=a.cols-1;0<=b&&0<=e;b--)-1==a.tiles[e][b]?(f.scoreTile[e][b]+=d,d=0):a.tiles[e][b]==h?d++:a.tiles[e][b]!=h&&
(d=1),h=a.tiles[e][b],e--}for(b=a.cols-2;0<=b;b--){e=b;d=0;h=-1;for(c=a.rows-1;0<=c&&0<=e;c--)-1==a.tiles[c][e]?(f.scoreTile[c][e]+=d,d=0):a.tiles[c][e]==h?d++:a.tiles[c][e]!=h&&(d=1),h=a.tiles[c][e],e--}for(c=0;c<a.rows;c++){e=c;d=0;h=-1;for(b=a.cols-1;0<=b&&e<a.rows;b--)-1==a.tiles[e][b]?(f.scoreTile[e][b]+=d,d=0):a.tiles[e][b]==h?d++:a.tiles[e][b]!=h&&(d=1),h=a.tiles[e][b],e++}for(b=0;b<a.cols-1;b++){e=b;d=0;h=-1;for(c=0;c<a.rows&&0<e;c++)-1==a.tiles[c][e]?(f.scoreTile[c][e]+=d,d=0):a.tiles[c][e]==
h?d++:a.tiles[c][e]!=h&&(d=1),h=a.tiles[c][e],e--}for(c=a.rows-1;0<=c;c--){e=c;d=0;h=-1;for(b=0;b<a.cols&&0<=e;b++)-1==a.tiles[e][b]?(f.scoreTile[e][b]+=d,d=0):a.tiles[e][b]==h?d++:a.tiles[e][b]!=h&&(d=1),h=a.tiles[e][b],e--}for(b=0;b<a.cols-1;b++){e=b;d=0;h=-1;for(c=a.rows-1;0<=c&&0<=e;c--)-1==a.tiles[c][e]?(f.scoreTile[c][e]+=d,d=0):a.tiles[c][e]==h?d++:a.tiles[c][e]!=h&&(d=1),h=a.tiles[c][e],e++}e=h=d=0;console.log("score tile");for(c=0;c<a.rows;c++)for(b=0;b<a.cols;b++)f.scoreTile[c][b]>d&&(d=
f.scoreTile[c][b],h=c,e=b);a.aiTileX=h;a.aiTileY=e;a.selectedTileX=a.aiTileX;a.selectedTileY=a.aiTileY;a.tiles[a.aiTileX][a.aiTileY]=a.currentPlayerID}}}();TicTacToe.BoardTile=function(a,f,c,b,d,h){var e,j,i,g,m,n,k,l;this.update=function(){"blinkX"==k?(1<=l&&(k="x"),l+=0.03):"blinkO"==k?(1<=l&&(k="o"),l+=0.02):"toX"==k?(1<=l&&(k="x"),l+=0.05):"toO"==k&&(1<=l&&(k="o"),l+=0.05)};this.draw=function(a){"x"==k?a.drawImage(e,g*m,i*n,m,n):"o"==k?a.drawImage(j,g*m,i*n,m,n):"blinkX"==k?(a.globalAlpha=100*l%20/20,a.drawImage(e,g*m,i*n,m,n),a.globalAlpha=1):"blinkO"==k?(a.globalAlpha=100*l%20/20,a.drawImage(j,g*m,i*n,m,n),a.globalAlpha=1):"toX"==k?(a.globalAlpha=
l,a.drawImage(e,g*m,i*n,m/l,n/l),a.globalAlpha=1):"toO"==k&&(a.globalAlpha=l,a.drawImage(j,g*m,i*n,m/l,n/l),a.globalAlpha=1);a.textAlign="center";a.font="16px Arial Bold"};this.setState=function(a){switch(a){case -1:k="empty";break;case 0:k="toX";break;case 1:k="toO"}l=0};this.highlight=function(){if("x"==k||"toX"==k)k="blinkX";if("o"==k||"toO"==k)k="blinkO";l=0};this.updateRes=function(a,b,d,c,h,f){e=a;j=b;i=d;g=c;m=h;n=f};k="empty";e=a;j=f;i=c;g=b;m=d;n=h};TicTacToe.GameBoard=function(a,f,c){function b(){q();p();for(var a=0;a<m;a++)for(var b=0;b<n;b++)o[a][b].updateRes(d,h,a,b,k,l);e=$("#boardCanvas").offset().left;j=$("#boardCanvas").offset().top}var d,h,e,j,i,g,m,n,k,l,o=[],p=function(){var a;a=800<$(window).width()?"2X":"";h=new Image;h.src="images/oTile"+a+".png";d=new Image;d.src="images/xTile"+a+".png"},q=function(){var a=document.getElementById("boardCanvas");g=800<$(window).width()?i=480:i=320;a.width=i;a.height=g;k=i/n;l=g/m};this.x=function(){return e};
this.y=function(){return j};this.width=function(){return i};this.height=function(){return g};this.tileWidth=function(){return k};this.tileHeight=function(){return l};this.resize=function(){q();p()};this.update=function(a,b){var d=TicTacToe.GameState,c=a.x-e,h=a.y-j;d.hoverTileX=-1;d.hoverTileY=-1;0<c&&(0<h&&c<i&&h<g)&&(d.hoverTileX=Math.floor(h/l),d.hoverTileY=Math.floor(c/k),-1!==d.tiles[d.hoverTileX][d.hoverTileY]&&(d.hoverTileX=-1,d.hoverTileY=-1));null!==b&&(-1!=d.hoverTileX?(d.selectedTileX=
d.hoverTileX,d.selectedTileY=d.hoverTileY,d.tiles[d.selectedTileX][d.selectedTileY]=d.currentPlayerID,o[d.selectedTileX][d.selectedTileY].setState(d.currentPlayerID),d.isValidMove=!0):d.isValidMove=!1);if(0!=d.highlightTiles.length){for(c=0;c<d.highlightTiles.length;c++)o[d.highlightTiles[c].x][d.highlightTiles[c].y].highlight();d.highlightTiles.length=0;TicTacToe.AudioManager.chime()}for(d=0;d<m;d++)for(c=0;c<n;c++)o[d][c].update()};this.draw=function(a){a.clearRect(0,0,i,g);for(var d=0;d<m;d++)for(var b=
0;b<n;b++)o[d][b].draw(a);a.fillStyle="rgba(255, 0, 0, 0.5);";a.beginPath();a.rect(TicTacToe.GameState.hoverTileY*k,TicTacToe.GameState.hoverTileX*l,k,l);a.closePath();a.fill()};this.reset=function(){for(var a=0;a<m;a++){o[a]=[];for(var b=0;b<n;b++)o[a][b]=new TicTacToe.BoardTile(d,h,a,b,k,l)}};this.updateAIMove=function(a){o[a.aiTileX][a.aiTileY].setState(a.currentPlayerID);if(0!=a.highlightTiles.length){TicTacToe.AudioManager.chime();for(var d=0;d<a.highlightTiles.length;d++)o[a.highlightTiles[d].x][a.highlightTiles[d].y].highlight();
a.highlightTiles.length=0}};m=f;n=c;e=$("#boardCanvas").offset().left;j=$("#boardCanvas").offset().top;q();p();this.reset();window.addEventListener("resize",b,!1);window.addEventListener("orientationchange",b,!1)};TicTacToe.GameManager=function(){function a(){var a,b,c,f;a=TicTacToe.GameState;b="Amoeba;Mosquito;Dog;Monkey;Baby;Student;Professor;Scientist;Super Hero;God".split(";");c="images/Amoeba.png images/Mosquito.png images/Dog.png images/Monkey.png images/Baby.png images/Student.png images/Professor.png images/Scientist.png images/SuperHero.png images/God.png".split(" ");TicTacToe.GameState.isAI?a.player1Score>a.player2Score?(f=Math.round(5+(a.player1Score-a.player2Score)/2-a.p1ElapsedTime/3E4),f=0>f?
0:f,f=9<f?9:f,a.gameStatus=a.p1Name+" Wins",a.gameDescription=a.p1Name+" scored "+a.player1Score+" points and earned the title of "+b[f]):a.player1Score<a.player2Score?(a.gameStatus=a.p1Name+" Loses",a.gameDescription=a.p1Name+" scored "+a.player1Score+" points in Tic Tac Toe and lost the game",f=0):(f=0,a.gameStatus="Game Draw",a.gameDescription="Game draw between "+a.p1Name+" and AI with a score of "+a.player1Score):a.player1Score>a.player2Score?(f=Math.round((a.player1Score-a.player2Score)/2+(a.p2ElapsedTime-
a.p1ElapsedTime)/3E4),f=0>f?0:f,f=9<f?9:f,a.gameStatus=a.p1Name+" Wins",a.gameDescription=a.p1Name+" scored "+a.player1Score+" points against "+a.p2Name+" and earned the title of "+b[f]):a.player1Score<a.player2Score?(f=Math.round((a.player2Score-a.player1Score)/2+(a.p1ElapsedTime-a.p2ElapsedTime)/3E4),f=0>f?0:f,f=9<f?9:f,a.gameStatus=a.p2Name+" Wins",a.gameDescription=a.p2Name+" scored "+a.player2Score+" points against "+a.p1Name+" and earned the title of "+b[f]):(f=0,a.gameStatus="Game Draw",a.gameDescription=
"Game draw between "+a.p1Name+" and "+a.p2Name+" with a score of "+a.player1Score);TicTacToe.GameState.rank=f;$("#gOverStatus").text(a.gameStatus);$("#gOverDescription").text(a.gameDescription);$("#gOverRemark").text("Amoeba huh? Wish you atleast had multi celled brains.;Silly Insect. But atleast you hav brains;You played with doggy instincts, not bad;Come on. You are on the right track. Practice more;Allast you show the IQ of human species;You got the potential to be the best. just Practice;Wow! Now can teach your fellow mates on how to play;Brainy, Brainy, keep it up;No one can beat you now. You are off the charts;The Super computer AI bows before you my lord".split(";")[f]);
console.log(f);$("#badgeImageHolder").attr({src:c[f]});a.badgeURL="http://www.gethugames.in/tictactoe/"+c[f];TicTacToe.FBWrapper.postAction()}function f(){null==TicTacToe.FBWrapper.accessToken&&$("#shareFacebookWidget").fadeIn(500).delay(2E3).fadeOut(400,f)}var c,b;return{init:function(){var d=document.getElementById("boardCanvas");c=d.getContext("2d");d.addEventListener("selectStart",function(a){a.preventDefault();return!1},!1);document.body.addEventListener("touchmove",function(a){a.preventDefault()},
!1);TicTacToe.GameState.reset();TicTacToe.AudioManager.init();TicTacToe.InputManager.init();b=new TicTacToe.GameBoard(c,TicTacToe.GameState.rows,TicTacToe.GameState.cols);setTimeout(TicTacToe.GameManager.loop,1E3*(1/30));$("#newAIGameButton").click(function(){$("#p1NameDiv1").focus();TicTacToe.GameState.reset();TicTacToe.GameState.isAI=!0;TicTacToe.GameState.currentScreen="Game";b.reset();$("#menuScreen").hide();$(".freeBoardDiv").hide();$("#scoreBoardDiv").show();$("#playOptionsDiv").show();$("#tipsScreen").show();
$("#tipsScreen").delay(3E3).fadeOut();$("#p2NameDiv1").hide()});$("#newHumanGameButton").click(function(){TicTacToe.GameState.reset();TicTacToe.GameState.currentScreen="Game";TicTacToe.GameState.isAI=!1;b.reset();$("#menuScreen").hide();$(".freeBoardDiv").hide();$("#scoreBoardDiv").show();$("#playOptionsDiv").show();$("#tipsScreen").show();$("#tipsScreen").delay(3E3).fadeOut();$("#p2NameDiv1").show()});$("#p1NameDiv1").keyup(function(){var b=$("#p1NameDiv1").val();TicTacToe.GameState.p1Name=b;$("#p1NameDiv2").text(b);
"End"==TicTacToe.GameState.currentScreen&&a()});$("#p2NameDiv1").keyup(function(){var b=$("#p2NameDiv1").val();TicTacToe.GameState.p2Name=b;"End"==TicTacToe.GameState.currentScreen&&a()})},loop:function(){TicTacToe.GameManager.update();TicTacToe.GameManager.draw();setTimeout(TicTacToe.GameManager.loop,1E3*(1/30))},update:function(){var c=TicTacToe.InputManager.getMouse(),h=TicTacToe.InputManager.getClickIfAny(),e=c.x-b.x(),j=c.y-b.y();if("Game"==TicTacToe.GameState.currentScreen){b.update(c,h);if(0<
e&&(0<j&&e<b.width()&&j<b.height())&&null!=h){TicTacToe.GameLogic.updateScore(TicTacToe.GameState);TicTacToe.GameState.isValidMove&&(TicTacToe.AudioManager.click(),TicTacToe.GameLogic.endTurn(TicTacToe.GameState));TicTacToe.GameLogic.updateUI(TicTacToe.GameState);if(TicTacToe.GameState.isGameOver){a();TicTacToe.GameState.currentScreen="End";$("#shareScoreWidget").show();null==TicTacToe.FBWrapper.accessToken?f():$("#shareFacebookWidget").hide();return}if(TicTacToe.GameState.isAI&&(TicTacToe.GameState.isValidMove&&
(TicTacToe.GameLogic.aiMove(TicTacToe.GameState),TicTacToe.GameLogic.updateScore(TicTacToe.GameState),b.updateAIMove(TicTacToe.GameState),TicTacToe.GameLogic.endTurn(TicTacToe.GameState),TicTacToe.GameLogic.updateUI(TicTacToe.GameState)),TicTacToe.GameState.isGameOver)){a();TicTacToe.GameState.currentScreen="End";$("#shareScoreWidget").show();null==TicTacToe.FBWrapper.accessToken?f():$("#shareFacebookWidget").hide();return}}TicTacToe.GameLogic.calcTime(TicTacToe.GameState)}},draw:function(){"Game"==
TicTacToe.GameState.currentScreen?b.draw(c):"End"==TicTacToe.GameState.currentScreen&&b.draw(c)}}}();
